<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جراب الوزارة</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }
        body {
            font-family: 'Cairo', 'Arial', sans-serif;
            line-height: 1.6;
            background: #f8fafc;
            color: #2d3748;
            min-height: 100vh;
            direction: rtl;
        }
        body.dark-mode {
            background: #121826;
            color: #e2e8f0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            position: relative;
        }
        .dark-mode .header {
            background: #1e293b;
            border-color: #334155;
        }
        .header h1 {
            color: #1a202c;
            font-size: 2.2rem;
            margin-bottom: 8px;
            font-weight: 700;
        }
        .dark-mode .header h1 {
            color: #f1f5f9;
        }
        .header p {
            color: #718096;
            font-size: 1rem;
        }
        .dark-mode .header p {
            color: #94a3b8;
        }
        .theme-toggle {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #e2e8f0;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .theme-toggle:hover {
            transform: rotate(15deg);
        }
        .dark-mode .theme-toggle {
            background: #334155;
            color: #f8fafc;
        }
        .product-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 20px;
        }
        .dark-mode .product-section {
            background: #1e293b;
            border-color: #334155;
        }
        .product-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }
        .product-images {
            position: relative;
        }
        .main-image {
            width: 100%;
            height: 450px; /* زيادة الارتفاع */
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #cbd5e0;
            overflow: hidden;
            position: relative;
            background-color: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
        }
        .main-image:active {
            cursor: grabbing;
        }
        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: contain; /* عرض الصورة كاملة دون اقتصاص */
            display: none;
        }
        .main-image .image-placeholder {
            position: absolute;
            z-index: 1;
            text-align: center;
            padding: 20px;
            color: #4a5568;
        }
        .dark-mode .main-image {
            border-color: #475569;
        }
        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .thumbnail {
            height: 90px; /* زيادة الارتفاع */
            background: #2d3748;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
        }
        .thumbnail:hover {
            background: #1a202c;
            transform: translateY(-3px);
        }
        .thumbnail.active {
            border: 2px solid #4299e1;
            box-shadow: 0 0 10px rgba(66, 153, 225, 0.5);
        }
        .product-details {
            position: relative;
        }
        .product-details h2 {
            color: #1a202c;
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .dark-mode .product-details h2 {
            color: #f1f5f9;
        }
        .price {
            font-size: 2rem;
            color: #d53f8c;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .original-price {
            text-decoration: line-through;
            color: #a0aec0;
            font-size: 1.2rem;
            margin-right: 10px;
            font-weight: 400;
        }
        .discount-badge {
            background: #e53e3e;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-right: 10px;
        }
        .features {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
        }
        .dark-mode .features {
            background: #0f172a;
            border-color: #334155;
        }
        .features h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        .dark-mode .features h3 {
            color: #e2e8f0;
        }
        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 6px 0;
            font-size: 0.95rem;
        }
        .dark-mode .feature-item {
            color: #cbd5e1;
        }
        .feature-item:hover {
            color: #4299e1;
        }
        .feature-icon {
            width: 20px;
            height: 20px;
            background: #48bb78;
            border-radius: 50%;
            margin-left: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            flex-shrink: 0;
        }
        .order-form {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 20px;
            display: none;
        }
        .dark-mode .order-form {
            background: #1e293b;
            border-color: #334155;
        }
        .form-group {
            margin-bottom: 25px;
        }
        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: #2d3748;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .dark-mode .form-group label {
            color: #e2e8f0;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            background: white;
            color: #1a202c;
        }
        .dark-mode .form-group input,
        .dark-mode .form-group select,
        .dark-mode .form-group textarea {
            background: #0f172a;
            border-color: #334155;
            color: #e2e8f0;
        }
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }
        .dark-mode .form-group input:focus,
        .dark-mode .form-group select:focus,
        .dark-mode .form-group textarea:focus {
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
        }
        .btn {
            background: #4299e1;
            color: white;
            padding: 14px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
            font-family: 'Cairo', sans-serif;
        }
        .btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(66, 153, 225, 0.3);
        }
        .btn:active {
            transform: translateY(0);
        }
        .btn-secondary {
            background: #a0aec0;
        }
        .btn-secondary:hover {
            background: #718096;
        }
        .confirmation-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            display: none;
        }
        .dark-mode .confirmation-section {
            background: #1e293b;
            border-color: #334155;
        }
        .confirmation-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .confirmation-card {
            background: #4299e1;
            color: white;
            padding: 24px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .confirmation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .confirmation-card.whatsapp {
            background: #25d366;
        }
        .confirmation-card.whatsapp:hover {
            background: #1da851;
        }
        .confirmation-card.email {
            background: #ea4335;
        }
        .confirmation-card.email:hover {
            background: #d33b2c;
        }
        .confirmation-card.phone {
            background: #4285f4;
        }
        .confirmation-card.phone:hover {
            background: #3367d6;
        }
        .confirmation-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        .order-summary {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid #e2e8f0;
        }
        .dark-mode .order-summary {
            background: #0f172a;
            border-color: #334155;
        }
        .order-summary h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        .dark-mode .order-summary h3 {
            color: #e2e8f0;
        }
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        .dark-mode .summary-item {
            color: #cbd5e1;
        }
        .summary-total {
            display: flex;
            justify-content: space-between;
            font-weight: 700;
            font-size: 1.2rem;
            color: #1a202c;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
            margin-top: 10px;
        }
        .dark-mode .summary-total {
            color: #f1f5f9;
            border-top-color: #334155;
        }
        .back-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #e2e8f0;
            color: #4a5568;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .dark-mode .back-btn {
            background: #334155;
            color: #cbd5e1;
        }
        .back-btn:hover {
            background: #cbd5e0;
        }
        .dark-mode .back-btn:hover {
            background: #475569;
        }
        .success-message {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: #f0fff4;
            border-radius: 8px;
            border: 1px solid #9ae6b4;
        }
        .dark-mode .success-message {
            background: #052e16;
            border-color: #166534;
        }
        .success-message p {
            color: #22543d;
            font-weight: 500;
            font-size: 0.95rem;
        }
        .dark-mode .success-message p {
            color: #86efac;
        }
        .payment-info {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #e2e8f0;
            text-align: center;
            font-weight: 500;
            color: #2d3748;
        }
        .dark-mode .payment-info {
            background: #0f172a;
            border-color: #334155;
            color: #e2e8f0;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }
        .loading-spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .image-error {
            color: #e53e3e;
            text-align: center;
            padding: 10px;
            font-size: 0.9rem;
            background: #fff5f5;
            border-radius: 4px;
            margin-top: 10px;
        }
        .dark-mode .image-error {
            background: #2d2222;
            color: #fc8181;
        }
        .email-help {
            background: #ebf8ff;
            padding: 12px;
            border-radius: 6px;
            margin-top: 15px;
            font-size: 0.9rem;
            color: #2b6cb0;
        }
        .dark-mode .email-help {
            background: #1a365d;
            color: #90cdf4;
        }
        .swipe-indicator {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }
        .swipe-dot {
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        .swipe-dot.active {
            background: #4299e1;
            transform: scale(1.2);
        }
        @media (max-width: 992px) {
            .product-grid {
                gap: 30px;
            }
        }
        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .confirmation-options {
                grid-template-columns: 1fr;
            }
            
            .main-image {
                height: 350px;
            }
            
            .product-details h2 {
                font-size: 1.6rem;
            }
            
            .price {
                font-size: 1.8rem;
            }
        }
        @media (max-width: 576px) {
            .container {
                padding: 15px;
            }
            
            .header {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .product-section {
                padding: 20px 15px;
            }
            
            .main-image {
                height: 280px;
            }
            
            .product-details h2 {
                font-size: 1.4rem;
            }
            
            .price {
                font-size: 1.6rem;
            }
            
            .confirmation-card {
                padding: 20px 15px;
            }
            
            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 10px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <button class="theme-toggle" id="themeToggle">🕶️</button>
            <h1>جراب الوزارة</h1>
            <p>الحماية المثلى لتابلت وزارة التربية والتعليم مع قلم التاتش المجاني</p>
        </div>
        <!-- Product Section -->
        <div class="product-section" id="product-section">
            <div class="product-grid">
                <div class="product-images">
                    <div class="main-image" id="main-image">
                        <div class="image-placeholder">يتم تحميل الصورة...</div>
                        <!-- تم تعديل ترتيب الصور حسب المطلوب -->
                        <img src="https://i.ibb.co/Nnrk2cHC/5828140711252445494.jpg" alt="الواجهة الأمامية" id="main-img-1">
                        <img src="https://i.ibb.co/rRVxVWD0/5828140711252445495.jpg" alt="الواجهة الخلفية" id="main-img-2">
                        <img src="https://i.ibb.co/TDB6S68W/5809767876247276356-1.jpg" alt="مع القلم" id="main-img-3">
                        
                        <!-- مؤشرات التنقل -->
                        <div class="swipe-indicator" id="swipe-indicator">
                            <div class="swipe-dot active" data-index="1"></div>
                            <div class="swipe-dot" data-index="2"></div>
                            <div class="swipe-dot" data-index="3"></div>
                        </div>
                    </div>
                    <div class="thumbnail-grid">
                        <!-- تم تعديل الدوال حسب المطلوب -->
                        <div class="thumbnail active" style="background-image: url('https://i.ibb.co/Nnrk2cHC/5828140711252445494.jpg');" onclick="changeMainImage(1)">
                            <div style="background: rgba(0,0,0,0.5); padding: 3px; border-radius: 4px;">الواجهة الأمامية</div>
                        </div>
                        <div class="thumbnail" style="background-image: url('https://i.ibb.co/rRVxVWD0/5828140711252445495.jpg');" onclick="changeMainImage(2)">
                            <div style="background: rgba(0,0,0,0.5); padding: 3px; border-radius: 4px;">الواجهة الخلفية</div>
                        </div>
                        <div class="thumbnail" style="background-image: url('https://i.ibb.co/TDB6S68W/5809767876247276356-1.jpg');" onclick="changeMainImage(3)">
                            <div style="background: rgba(0,0,0,0.5); padding: 3px; border-radius: 4px;">القلم</div>
                        </div>
                    </div>
                </div>
                <div class="product-details">
                    <h2>جراب الوزارة الرسمي - جلد أسود + قلم تاتش مجاني</h2>
                    <div class="price">
                        <span class="discount-badge">خصم 22%</span>
                        <span class="original-price">320 جنيه</span>
                        250 جنيه
                    </div>
                    <div class="features">
                        <h3>مواصفات المنتج</h3>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>جراب جلد أسود</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>قلم تاتش مجاناً</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>حماية شاملة من الخدوش والسقوط</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>حامل مدمج لسهولة الاستعمال</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>تصميم خصيصاً لتابلت A7 الوزارة</span>
                        </div>
                    </div>
                    <div class="payment-info">
                        الدفع عند الاستلام 
                    </div>
                    <button class="btn" onclick="showOrderForm()">اطلب الآن - توصيل مجاني</button>
                </div>
            </div>
            <div style="background: #f7fafc; padding: 20px; border-radius: 8px; margin-top: 25px; border: 1px solid #e2e8f0;">
                <h3 style="color: #2d3748; margin-bottom: 12px; font-size: 1.1rem; font-weight: 600;">وصف المنتج التفصيلي</h3>
                <p style="line-height: 1.7; color: #4a5568; font-size: 0.95rem;">
                    جراب الوزارة الرسمي مصنوع من الجلد الأسود ، مصمم خصيصاً لحماية التابلت A7 الخاص بوزارة التربية والتعليم. 
                    يأتي المنتج مع قلم تاتش مجاناً للكتابة والرسم. الجراب يوفر حماية كاملة من الخدوش والصدمات مع إمكانية 
                    الوصول السهل لجميع المنافذ والأزرار. يتضمن حامل ذكي لاستخدام التابلت بزوايا مختلفة مما يجعله مثالي للدراسة والمذاكرة.
                    جودة التصنيع المصري الممتاز .
                </p>
            </div>
        </div>
        <!-- Order Form -->
        <div class="order-form" id="order-form">
            <div class="back-btn" onclick="showProductSection()">
                <i>←</i> العودة للمنتج
            </div>
            
            <h2 style="text-align: center; color: #2c3e50; margin-bottom: 30px;">📋 بيانات الطلب</h2>
            
            <div class="order-summary" id="order-summary">
                <h3>ملخص الطلب</h3>
                <div class="summary-item">
                    <span>جراب الوزارة (أسود) + قلم تاتش</span>
                    <span>250 جنيه</span>
                </div>
                <div class="summary-item">
                    <span>التوصيل</span>
                    <span>مجاني</span>
                </div>
                <div class="summary-total">
                    <span>المجموع النهائي:</span>
                    <span>250 جنيه</span>
                </div>
                <div class="payment-info">
                    الدفع عند الاستلام فقط
                </div>
            </div>
            <form id="orderForm">
                <div class="form-group">
                    <label>الاسم الكامل *</label>
                    <input type="text" id="fullName" required placeholder="الاسم الثلاثي">
                </div>
                <div class="form-group">
                    <label>رقم الهاتف *</label>
                    <input type="tel" id="phone" required placeholder="مثال: 01XXXXXXXXX">
                </div>
                <div class="form-group">
                    <label>البريد الإلكتروني *</label>
                    <input type="email" id="email" required placeholder="example@example.com">
                    <div class="email-help">
                        تأكد من صحة البريد الإلكتروني، سيتم إرسال تفاصيل الطلب إليه
                    </div>
                </div>
                <div class="form-group">
                    <label>العنوان بالتفصيل *</label>
                    <textarea id="address" rows="3" required placeholder="المحافظة، المدينة، الشارع، رقم المبنى"></textarea>
                </div>
                <div class="form-group">
                    <label>المحافظة *</label>
                    <select id="governorate" required>
                        <option value="">اختر المحافظة</option>
                        <option value="القاهرة">القاهرة</option>
                        <option value="الجيزة">الجيزة</option>
                        <option value="الإسكندرية">الإسكندرية</option>
                        <option value="أسيوط">أسيوط</option>
                        <option value="الأقصر">الأقصر</option>
                        <option value="أسوان">أسوان</option>
                        <option value="المنيا">المنيا</option>
                        <option value="سوهاج">سوهاج</option>
                        <option value="قنا">قنا</option>
                        <option value="بني سويف">بني سويف</option>
                        <option value="الفيوم">الفيوم</option>
                        <option value="دمياط">دمياط</option>
                        <option value="الدقهلية">الدقهلية</option>
                        <option value="الشرقية">الشرقية</option>
                        <option value="القليوبية">القليوبية</option>
                        <option value="كفر الشيخ">كفر الشيخ</option>
                        <option value="الغربية">الغربية</option>
                        <option value="المنوفية">المنوفية</option>
                        <option value="البحيرة">البحيرة</option>
                        <option value="الإسماعيلية">الإسماعيلية</option>
                        <option value="بورسعيد">بورسعيد</option>
                        <option value="السويس">السويس</option>
                        <option value="شمال سيناء">شمال سيناء</option>
                        <option value="جنوب سيناء">جنوب سيناء</option>
                        <option value="مطروح">مطروح</option>
                        <option value="البحر الأحمر">البحر الأحمر</option>
                        <option value="الوادي الجديد">الوادي الجديد</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ملاحظات إضافية</label>
                    <textarea id="notes" rows="2" placeholder="أي تعليمات خاصة للتوصيل"></textarea>
                </div>
                <button type="submit" class="btn">تأكيد البيانات والمتابعة</button>
            </form>
        </div>
        <!-- Confirmation Section -->
        <div class="confirmation-section" id="confirmation-section">
            <div class="back-btn" onclick="showOrderForm()">
                <i>←</i> تعديل البيانات
            </div>
            
            <h2 style="text-align: center; color: #1a202c; margin-bottom: 8px; font-size: 1.4rem; font-weight: 600;">تم استلام طلبك بنجاح</h2>
            <p style="text-align: center; color: #718096; margin-bottom: 25px; font-size: 0.95rem;">تم إرسال تفاصيل الطلب إلى البريد الإلكتروني الخاص بك</p>
            
            <div class="success-message">
                <p>
                    شكراً لاختيارك جراب الوزارة. سيتم التواصل معك خلال ساعات قليلة لتأكيد الطلب وترتيب التوصيل
                </p>
            </div>
            
            <div class="confirmation-options">
                <button class="confirmation-card whatsapp" onclick="contactViaWhatsapp()">
                    <div class="confirmation-icon">📱</div>
                    <h3>التواصل عبر واتساب</h3>
                    <p>اضغط هنا للتواصل مع خدمة العملاء عبر واتساب</p>
                </button>
                
                <button class="confirmation-card email" onclick="resendEmail()">
                    <div class="confirmation-icon">✉️</div>
                    <h3>إعادة إرسال البريد</h3>
                    <p>اضغط هنا لإعادة إرسال البريد الإلكتروني</p>
                </button>
                
                <button class="confirmation-card phone" onclick="callCustomerService()">
                    <div class="confirmation-icon">📞</div>
                    <h3>الاتصال بخدمة العملاء</h3>
                    <p>اضغط هنا للاتصال بنا مباشرةً</p>
                </button>
            </div>
        </div>
    </div>
    <script>
        // Initialize variables
        let selectedColor = 'أسود';
        let orderData = {};
        let currentImageIndex = 1;
        let touchStartX = 0;
        let touchEndX = 0;
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set first image as active
            changeMainImage(1);
            
            // Theme toggle
            const themeToggle = document.getElementById('themeToggle');
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            const currentTheme = localStorage.getItem('theme');
            
            if (currentTheme === 'dark' || (!currentTheme && prefersDarkScheme.matches)) {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '👓';
            } else {
                themeToggle.textContent = '🕶️';
            }
            
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    localStorage.setItem('theme', 'dark');
                    themeToggle.textContent = '👓';
                } else {
                    localStorage.setItem('theme', 'light');
                    themeToggle.textContent = '🕶️';
                }
            });
            
            // Check if images loaded successfully
            checkImageLoading();
            
            // Add touch events for swipe navigation
            setupSwipeNavigation();
        });
        
        // Function to change main image
        function changeMainImage(index) {
            // Hide all images
            const mainImages = document.querySelectorAll('#main-image img');
            mainImages.forEach(img => img.style.display = 'none');
            
            // Show selected image
            const selectedImg = document.getElementById(`main-img-${index}`);
            selectedImg.style.display = 'block';
            
            // Hide placeholder
            document.querySelector('.image-placeholder').style.display = 'none';
            
            // Update thumbnails
            const thumbnails = document.querySelectorAll('.thumbnail');
            thumbnails.forEach((thumb, i) => {
                if (i === index - 1) {
                    thumb.classList.add('active');
                } else {
                    thumb.classList.remove('active');
                }
            });
            
            // Update swipe indicators
            const swipeDots = document.querySelectorAll('.swipe-dot');
            swipeDots.forEach(dot => {
                if (parseInt(dot.dataset.index) === index) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            // Update current index
            currentImageIndex = index;
        }
        
        // Setup swipe navigation
        function setupSwipeNavigation() {
            const mainImage = document.getElementById('main-image');
            
            // Touch events for mobile
            mainImage.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            });
            
            mainImage.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });
            
            // Mouse events for desktop
            mainImage.addEventListener('mousedown', e => {
                touchStartX = e.clientX;
                document.addEventListener('mouseup', handleMouseUp);
            });
        }
        
        function handleMouseUp(e) {
            touchEndX = e.clientX;
            handleSwipe();
            document.removeEventListener('mouseup', handleMouseUp);
        }
        
        function handleSwipe() {
            const diff = touchStartX - touchEndX;
            const threshold = 50; // الحد الأدنى من السحب للتغيير
            
            // سحب لليسار (next)
            if (diff > threshold) {
                nextImage();
            }
            // سحب لليمين (previous)
            else if (diff < -threshold) {
                prevImage();
            }
        }
        
        function nextImage() {
            let nextIndex = currentImageIndex + 1;
            if (nextIndex > 3) nextIndex = 1;
            changeMainImage(nextIndex);
        }
        
        function prevImage() {
            let prevIndex = currentImageIndex - 1;
            if (prevIndex < 1) prevIndex = 3;
            changeMainImage(prevIndex);
        }
        
        // Function to check if images loaded
        function checkImageLoading() {
            const images = document.querySelectorAll('#main-image img');
            let allLoaded = true;
            
            images.forEach(img => {
                if (!img.complete || img.naturalHeight === 0) {
                    allLoaded = false;
                    img.onerror = function() {
                        document.querySelector('.image-placeholder').textContent = 'لم يتم تحميل الصورة، يرجى التحقق من الاتصال بالإنترنت';
                        document.querySelector('.image-placeholder').style.display = 'block';
                    };
                }
            });
            
            if (allLoaded) {
                document.querySelector('.image-placeholder').style.display = 'none';
            }
        }
        
        // Function to show order form
        function showOrderForm() {
            document.getElementById('product-section').style.display = 'none';
            document.getElementById('order-form').style.display = 'block';
            document.getElementById('confirmation-section').style.display = 'none';
            window.scrollTo(0, 0);
        }
        
        // Function to show product section
        function showProductSection() {
            document.getElementById('product-section').style.display = 'block';
            document.getElementById('order-form').style.display = 'none';
            document.getElementById('confirmation-section').style.display = 'none';
            window.scrollTo(0, 0);
        }
        
        // Function to send email using Formspree
        function sendOrderEmail(orderData) {
            // Show loading overlay
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            // Using Formspree for email sending
            const formData = new FormData();
            formData.append('Name', orderData.fullName);
            formData.append('Phone', orderData.phone);
            formData.append('Email', orderData.email);
            formData.append('Governorate', orderData.governorate);
            formData.append('Address', orderData.address);
            formData.append('Notes', orderData.notes || 'لا توجد ملاحظات');
            formData.append('Product', orderData.product);
            formData.append('Color', orderData.color);
            formData.append('Price', orderData.price);
            
            // استبدل هذا الرابط برابط Formspree الخاص بك
            fetch('https://formspree.io/f/xanbvber', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    console.log('تم إرسال البريد الإلكتروني بنجاح!');
                    // Hide loading overlay
                    loadingOverlay.style.display = 'none';
                    // Show confirmation section
                    document.getElementById('confirmation-section').style.display = 'block';
                    window.scrollTo(0, 0);
                } else {
                    throw new Error('فشل في إرسال البريد الإلكتروني');
                }
            })
            .catch(error => {
                console.log('فشل في إرسال البريد الإلكتروني:', error);
                // Hide loading overlay
                loadingOverlay.style.display = 'none';
                // Show confirmation section anyway
                document.getElementById('confirmation-section').style.display = 'block';
                window.scrollTo(0, 0);
            });
        }
        
        // Function to submit order form
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Collect form data
            orderData = {
                fullName: document.getElementById('fullName').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
                governorate: document.getElementById('governorate').value,
                notes: document.getElementById('notes').value,
                color: selectedColor,
                product: 'جراب الوزارة + قلم تاتش',
                price: '250 جنيه'
            };
            
            // Hide order form
            document.getElementById('order-form').style.display = 'none';
            
            // Send email automatically
            sendOrderEmail(orderData);
        });
        
        // Additional functions for confirmation options
        function contactViaWhatsapp() {
            const phone = encodeURIComponent('+201285687227');
            const message = encodeURIComponent(`مرحباً، لقد قدمت طلباً لشراء جراب الوزارة. اسمي: ${orderData.fullName}`);
            window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
        }
        
        function resendEmail() {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            // Resend email
            sendOrderEmail(orderData);
            
            // Show success message
            setTimeout(() => {
                loadingOverlay.style.display = 'none';
                alert('تم إعادة إرسال البريد الإلكتروني بنجاح!');
            }, 1500);
        }
        
        function callCustomerService() {
            window.location.href = 'tel:+201285687227';
        }
    </script>
</body>
</html>

