<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جراب الوزارة وخدمات إخراج التابلت</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }
        body {
            font-family: 'Cairo', 'Arial', sans-serif;
            line-height: 1.6;
            background: #f8fafc;
            color: #2d3748;
            min-height: 100vh;
            direction: rtl;
        }
        body.dark-mode {
            background: #121826;
            color: #e2e8f0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 25px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            position: relative;
        }
        .dark-mode .header {
            background: #1e293b;
            border-color: #334155;
        }
        .header h1 {
            color: #1a202c;
            font-size: 2.2rem;
            margin-bottom: 8px;
            font-weight: 700;
        }
        .dark-mode .header h1 {
            color: #f1f5f9;
        }
        .header p {
            color: #718096;
            font-size: 1rem;
        }
        .dark-mode .header p {
            color: #94a3b8;
        }
        .theme-toggle {
            position: absolute;
            top: 20px;
            left: 20px;
            background: #e2e8f0;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        .theme-toggle:hover {
            transform: rotate(15deg);
        }
        .dark-mode .theme-toggle {
            background: #334155;
            color: #f8fafc;
        }
        .product-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 20px;
        }
        .dark-mode .product-section {
            background: #1e293b;
            border-color: #334155;
        }
        .product-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }
        .product-images {
            position: relative;
        }
        .main-image {
            width: 100%;
            height: 450px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #cbd5e0;
            overflow: hidden;
            position: relative;
            background-color: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
        }
        .dark-mode .main-image {
            background-color: #1e293b;
            border-color: #475569;
        }
        .main-image:active {
            cursor: grabbing;
        }
        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: none;
            background-color: inherit;
        }
        .main-image .image-placeholder {
            position: absolute;
            z-index: 1;
            text-align: center;
            padding: 20px;
            color: #4a5568;
        }
        .dark-mode .main-image .image-placeholder {
            color: #94a3b8;
        }
        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        .thumbnail {
            height: 90px;
            background: #2d3748;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.8rem;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
        }
        .dark-mode .thumbnail {
            background-color: #334155;
        }
        .thumbnail:hover {
            background: #1a202c;
            transform: translateY(-3px);
        }
        .thumbnail.active {
            border: 2px solid #4299e1;
            box-shadow: 0 0 10px rgba(66, 153, 225, 0.5);
        }
        .product-details {
            position: relative;
        }
        .product-details h2 {
            color: #1a202c;
            font-size: 1.8rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        .dark-mode .product-details h2 {
            color: #f1f5f9;
        }
        .price {
            font-size: 2rem;
            color: #d53f8c;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        .original-price {
            text-decoration: line-through;
            color: #a0aec0;
            font-size: 1.2rem;
            margin-right: 10px;
            font-weight: 400;
        }
        .discount-badge {
            background: #e53e3e;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-right: 10px;
        }
        .features {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
        }
        .dark-mode .features {
            background: #0f172a;
            border-color: #334155;
        }
        .features h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        .dark-mode .features h3 {
            color: #e2e8f0;
        }
        .feature-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            padding: 6px 0;
            font-size: 0.95rem;
        }
        .dark-mode .feature-item {
            color: #cbd5e1;
        }
        .feature-item:hover {
            color: #4299e1;
        }
        .feature-icon {
            width: 20px;
            height: 20px;
            background: #48bb78;
            border-radius: 50%;
            margin-left: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            flex-shrink: 0;
        }
        .order-form {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 20px;
            display: none;
        }
        .dark-mode .order-form {
            background: #1e293b;
            border-color: #334155;
        }
        .form-group {
            margin-bottom: 25px;
        }
        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: #2d3748;
            font-weight: 500;
            font-size: 0.9rem;
        }
        .dark-mode .form-group label {
            color: #e2e8f0;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            background: white;
            color: #1a202c;
        }
        .dark-mode .form-group input,
        .dark-mode .form-group select,
        .dark-mode .form-group textarea {
            background: #0f172a;
            border-color: #334155;
            color: #e2e8f0;
        }
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1);
        }
        .dark-mode .form-group input:focus,
        .dark-mode .form-group select:focus,
        .dark-mode .form-group textarea:focus {
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
        }
        .btn {
            background: #4299e1;
            color: white;
            padding: 14px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
            font-family: 'Cairo', sans-serif;
        }
        .btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(66, 153, 225, 0.3);
        }
        .btn:active {
            transform: translateY(0);
        }
        .btn-secondary {
            background: #a0aec0;
        }
        .btn-secondary:hover {
            background: #718096;
        }
        .confirmation-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            display: none;
        }
        .dark-mode .confirmation-section {
            background: #1e293b;
            border-color: #334155;
        }
        .confirmation-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .confirmation-card {
            background: #4299e1;
            color: white;
            padding: 24px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .confirmation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .confirmation-card.whatsapp {
            background: #25d366;
        }
        .confirmation-card.whatsapp:hover {
            background: #1da851;
        }
        .confirmation-card.email {
            background: #ea4335;
        }
        .confirmation-card.email:hover {
            background: #d33b2c;
        }
        .confirmation-card.phone {
            background: #4285f4;
        }
        .confirmation-card.phone:hover {
            background: #3367d6;
        }
        .confirmation-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        .order-summary {
            background: #f7fafc;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid #e2e8f0;
        }
        .dark-mode .order-summary {
            background: #0f172a;
            border-color: #334155;
        }
        .order-summary h3 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 1.1rem;
            font-weight: 600;
        }
        .dark-mode .order-summary h3 {
            color: #e2e8f0;
        }
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }
        .dark-mode .summary-item {
            color: #cbd5e1;
        }
        .summary-total {
            display: flex;
            justify-content: space-between;
            font-weight: 700;
            font-size: 1.2rem;
            color: #1a202c;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
            margin-top: 10px;
        }
        .dark-mode .summary-total {
            color: #f1f5f9;
            border-top-color: #334155;
        }
        .back-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            background: #e2e8f0;
            color: #4a5568;
            padding: 10px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        .dark-mode .back-btn {
            background: #334155;
            color: #cbd5e1;
        }
        .back-btn:hover {
            background: #cbd5e0;
        }
        .dark-mode .back-btn:hover {
            background: #475569;
        }
        .success-message {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: #f0fff4;
            border-radius: 8px;
            border: 1px solid #9ae6b4;
        }
        .dark-mode .success-message {
            background: #052e16;
            border-color: #166534;
        }
        .success-message p {
            color: #22543d;
            font-weight: 500;
            font-size: 0.95rem;
        }
        .dark-mode .success-message p {
            color: #86efac;
        }
        .payment-info {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #e2e8f0;
            text-align: center;
            font-weight: 500;
            color: #2d3748;
        }
        .dark-mode .payment-info {
            background: #0f172a;
            border-color: #334155;
            color: #e2e8f0;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            display: none;
        }
        .loading-spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .image-error {
            color: #e53e3e;
            text-align: center;
            padding: 10px;
            font-size: 0.9rem;
            background: #fff5f5;
            border-radius: 4px;
            margin-top: 10px;
        }
        .dark-mode .image-error {
            background: #2d2222;
            color: #fc8181;
        }
        .swipe-indicator {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }
        .swipe-dot {
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        .dark-mode .swipe-dot {
            background: rgba(255, 255, 255, 0.3);
        }
        .swipe-dot.active {
            background: #4299e1;
            transform: scale(1.2);
        }
        .discount-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .discount-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #cbd5e0;
            border-radius: 6px;
            font-size: 0.95rem;
            font-family: 'Cairo', sans-serif;
        }
        .dark-mode .discount-input {
            background: #0f172a;
            border-color: #334155;
            color: #e2e8f0;
        }
        .discount-btn {
            background: #48bb78;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s ease;
            font-family: 'Cairo', sans-serif;
            white-space: nowrap;
        }
        .discount-btn:hover {
            background: #38a169;
            transform: translateY(-2px);
        }
        .discount-message {
            margin-top: 8px;
            padding: 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            text-align: center;
        }
        .discount-success {
            background: #f0fff4;
            color: #22543d;
            border: 1px solid #9ae6b4;
        }
        .dark-mode .discount-success {
            background: #052e16;
            color: #86efac;
            border-color: #166534;
        }
        .discount-error {
            background: #fff5f5;
            color: #c53030;
            border: 1px solid #fc8181;
        }
        .dark-mode .discount-error {
            background: #2d2222;
            color: #fc8181;
            border-color: #e53e3e;
        }
        .discount-info {
            background: #ebf8ff;
            color: #2b6cb0;
            border: 1px solid #90cdf4;
        }
        .dark-mode .discount-info {
            background: #1a365d;
            color: #90cdf4;
            border-color: #4299e1;
        }
        .quantity-selector {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            background: #f7fafc;
            border-radius: 8px;
            padding: 10px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .dark-mode .quantity-selector {
            background: #0f172a;
            border-color: #334155;
        }
        .quantity-btn {
            width: 45px;
            height: 45px;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .quantity-btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }
        .quantity-btn:active {
            transform: translateY(0);
        }
        .quantity-input {
            width: 70px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0 10px;
            padding: 8px;
            border: 1px solid #cbd5e0;
            border-radius: 4px;
            background: white;
        }
        .dark-mode .quantity-input {
            background: #0f172a;
            border-color: #334155;
            color: #e2e8f0;
        }
        .quantity-label {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d3748;
            margin-left: 15px;
            flex-grow: 1;
        }
        .dark-mode .quantity-label {
            color: #e2e8f0;
        }
        .total-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        .dark-mode .total-price {
            color: #f1f5f9;
            background: #0f172a;
            border-color: #334155;
        }
        .price-details {
            font-size: 1rem;
            color: #718096;
            margin-bottom: 15px;
            text-align: center;
            padding: 8px;
            background: #f7fafc;
            border-radius: 6px;
            border: 1px dashed #cbd5e0;
        }
        .dark-mode .price-details {
            color: #94a3b8;
            background: #0f172a;
            border-color: #334155;
        }
        /* خدمات إخراج التابلت */
        .services-section {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 20px;
            display: none;
        }
        .dark-mode .services-section {
            background: #1e293b;
            border-color: #334155;
        }
        .services-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }
        @media (max-width: 992px) {
            .services-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        @media (max-width: 576px) {
            .services-grid {
                grid-template-columns: 1fr;
            }
        }
        .service-card {
            background: #f7fafc;
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
        }
        .dark-mode .service-card {
            background: #0f172a;
            border-color: #334155;
        }
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.08);
            background: #edf2f7;
        }
        .dark-mode .service-card:hover {
            background: #1e293b;
        }
        .service-card.selected {
            border: 2px solid #4299e1;
            background: #ebf8ff;
        }
        .dark-mode .service-card.selected {
            background: #1a365d;
        }
        .service-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #2d3748;
        }
        .dark-mode .service-card h3 {
            color: #e2e8f0;
        }
        .service-card p {
            color: #718096;
            margin-bottom: 15px;
        }
        .dark-mode .service-card p {
            color: #94a3b8;
        }
        .service-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: #d53f8c;
        }
        .service-description {
            font-size: 0.9rem;
            margin-top: 10px;
            color: #4a5568;
        }
        .dark-mode .service-description {
            color: #94a3b8;
        }
        .service-form {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            margin-bottom: 20px;
            display: none;
        }
        .dark-mode .service-form {
            background: #1e293b;
            border-color: #334155;
        }
        .service-confirmation {
            background: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
            display: none;
        }
        .dark-mode .service-confirmation {
            background: #1e293b;
            border-color: #334155;
        }
        .address-field {
            display: none;
        }
        .location-btn {
            background: #48bb78;
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            margin-top: 10px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .location-btn:hover {
            background: #38a169;
        }
        .discount-tag {
            background: #e53e3e;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-top: 10px;
            display: inline-block;
        }
        @media (max-width: 992px) {
            .product-grid {
                gap: 30px;
            }
        }
        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
            .header h1 {
                font-size: 1.8rem;
            }
            .confirmation-options {
                grid-template-columns: 1fr;
            }
            .main-image {
                height: 350px;
            }
            .product-details h2 {
                font-size: 1.6rem;
            }
            .price {
                font-size: 1.8rem;
            }
        }
        @media (max-width: 576px) {
            .container {
                padding: 15px;
            }
            .header {
                padding: 20px 15px;
            }
            .header h1 {
                font-size: 1.5rem;
            }
            .product-section {
                padding: 20px 15px;
            }
            .main-image {
                height: 280px;
            }
            .product-details h2 {
                font-size: 1.4rem;
            }
            .price {
                font-size: 1.6rem;
            }
            .confirmation-card {
                padding: 20px 15px;
            }
            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 10px 12px;
            }
            .quantity-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
            .quantity-input {
                width: 50px;
                font-size: 1.1rem;
            }
            .quantity-label {
                font-size: 1rem;
                margin-left: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
    </div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <button class="theme-toggle" id="themeToggle">🕶️</button>
            <h1>الوزارة</h1>
            <p>الحماية المثلى لتابلت وزارة التربية والتعليم و توفير جميع خدمات تابلت الوزارة</p>
        </div>
        <!-- Product Section -->
        <div class="product-section" id="product-section">
            <div class="product-grid">
                <div class="product-images">
                    <div class="main-image" id="main-image">
                        <div class="image-placeholder">يتم تحميل الصورة...</div>
                        <!-- تم تعديل ترتيب الصور حسب المطلوب -->
                        <img src="https://i.ibb.co/Nnrk2cHC/5828140711252445494.jpg" alt="الواجهة الأمامية" id="main-img-1">
                        <img src="https://i.ibb.co/rRVxVWD0/5828140711252445495.jpg" alt="الواجهة الخلفية" id="main-img-2">
                        <img src="https://i.ibb.co/TDB6S68W/5809767876247276356-1.jpg" alt="مع القلم" id="main-img-3">
                        
                        <!-- مؤشرات التنقل -->
                        <div class="swipe-indicator" id="swipe-indicator">
                            <div class="swipe-dot active" data-index="1"></div>
                            <div class="swipe-dot" data-index="2"></div>
                            <div class="swipe-dot" data-index="3"></div>
                        </div>
                    </div>
                    <div class="thumbnail-grid">
                        <!-- تم تعديل الدوال حسب المطلوب -->
                        <div class="thumbnail active" style="background-image: url('https://i.ibb.co/Nnrk2cHC/5828140711252445494.jpg');" onclick="changeMainImage(1)">
                            <div style="background: rgba(0,0,0,0.5); padding: 3px; border-radius: 4px;">الواجهة الأمامية</div>
                        </div>
                        <div class="thumbnail" style="background-image: url('https://i.ibb.co/rRVxVWD0/5828140711252445495.jpg');" onclick="changeMainImage(2)">
                            <div style="background: rgba(0,0,0,0.5); padding: 3px; border-radius: 4px;">الواجهة الخلفية</div>
                        </div>
                        <div class="thumbnail" style="background-image: url('https://i.ibb.co/TDB6S68W/5809767876247276356-1.jpg');" onclick="changeMainImage(3)">
                            <div style="background: rgba(0,0,0,0.5); padding: 3px; border-radius: 4px;">القلم</div>
                        </div>
                    </div>
                </div>
                <div class="product-details">
                    <h2>جراب الوزارة الرسمي - جلد أسود + قلم تاتش مجاني</h2>
                    <div class="price">
                        <span class="discount-badge">خصم 22%</span>
                        <span class="original-price">320 جنيه</span>&nbsp;250 جنيه&nbsp; </div>
                    
                    <!-- تصميم جديد لعداد الكمية بشكل مستطيل -->
                    <div class="quantity-selector">
                        <button class="quantity-btn" id="decrease-quantity">-</button>
                        <input type="number" class="quantity-input" id="quantity" value="1" min="1" max="20">
                        <button class="quantity-btn" id="increase-quantity">+</button>
                        <span class="quantity-label">&nbsp;&nbsp;&nbsp;الكمية المطلوبة</span>
                    </div>
                    
                    <!-- إضافة السعر الإجمالي -->
                    <div class="total-price">
                        <span>السعر الإجمالي&nbsp;: </span>
                        <span id="total-price">&nbsp;250 جنيه</span>
                    </div>
                    <div class="price-details">
                        (السعر يشمل جميع الضرائب والتوصيل المجاني)
                    </div>
                    
                    <div class="features">
                        <h3>مواصفات المنتج</h3>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>جراب جلد أسود</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>قلم تاتش مجاناً</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>حماية شاملة من الخدوش والسقوط</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>حامل مدمج لسهولة الاستعمال</span>
                        </div>
                        <div class="feature-item">
                            <div class="feature-icon">✓</div>
                            <span>مصمم خصيصاً لتابلت A7 الوزارة</span>
                        </div>
                    </div>
                    <div class="payment-info">
                        الدفع عند الاستلام 
                    </div>
                    <button class="btn" onclick="showOrderForm()">اطلب الآن - توصيل مجاني</button>
                    <button class="btn btn-secondary" onclick="showServicesSection()">خدمات إخراج التابلت</button>
                </div>
            </div>
            <div style="background: #f7fafc; padding: 20px; border-radius: 8px; margin-top: 25px; border: 1px solid #e2e8f0;">
                <h3 style="color: #2d3748; margin-bottom: 12px; font-size: 1.1rem; font-weight: 600;">وصف المنتج التفصيلي</h3>
                <p style="line-height: 1.7; color: #4a5568; font-size: 0.95rem;">
                    جراب الوزارة الرسمي مصنوع من الجلد الأسود ، مصمم خصيصاً لحماية التابلت A7 الخاص بوزارة التربية والتعليم. 
                    يأتي المنتج مع قلم تاتش مجاناً للكتابة والرسم. الجراب يوفر حماية كاملة من الخدوش والصدمات مع إمكانية 
                    الوصول السهل لجميع المنافذ والأزرار. يتضمن حامل ذكي لاستخدام التابلت بزوايا مختلفة مما يجعله مثالي للدراسة والمذاكرة.
                    جودة التصنيع المصري الممتاز .
                </p>
            </div>
        </div>
        
        <!-- خدمات إخراج التابلت -->
        <div class="services-section" id="services-section">
            <div class="back-btn" onclick="showProductSection()">
                <i>←</i> العودة للمنتج
            </div>
            
            <h2 style="text-align: center; color: #1A73E8; margin-bottom: 20px;">خدمات إخراج التابلت من النظام</h2>
            <p style="text-align: center; color: #718096; margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
                نقدم حلولاً متكاملة لإخراج التابلت من النظام سواء بشكل مؤقت أو نهائي، بالإضافة إلى استشارات مجانية
                لمساعدتك في حل أي مشكلات فنية تواجهها مع تابلت الوزارة
            </p>
            
                       
            <div class="services-grid">
                <div class="service-card" onclick="selectService(1)">
                    <h3>إخراج مؤقت</h3>
                    <p>للطلاب الذين يحتاجون لإخراج التابلت لفترة محددة</p>
                    <div class="service-price">130 جنيه</div>
                    <div class="service-description">صالح لمدة محدودة</div>
                    
                </div>
                
                <div class="service-card" onclick="selectService(2)">
                    <h3>إخراج نهائي</h3>
                    <p>للطلاب الذين يحتاجون لإخراج التابلت بشكل دائم</p>
                    <div class="service-price">150 جنيه</div>
                    <div class="service-description">حل دائم ومضمون</div>
                   
                </div>
                
                <div class="service-card" onclick="selectService(3)">
                    <h3>استشارة مجانية</h3>
                    <p>للاستفسار عن أي مشكلة فنية في التابلت</p>
                    <div class="service-price">مجاناً</div>
                    <div class="service-description">دعم فني متخصص</div>
                </div>
            </div>
        </div>
        
        <!-- Order Form -->
        <div class="order-form" id="order-form">
            <div class="back-btn" onclick="showProductSection()">
                <i>←</i> العودة للمنتج
            </div>
            
            <h2 style="text-align: center; color: #1A73E8; margin-bottom: 30px;">📋 بيانات الطلب</h2>
            
            <div class="order-summary" id="order-summary">
                <h3>ملخص الطلب</h3>
                <div class="summary-item">
                    <span>جراب الوزارة (أسود) + قلم تاتش</span>
                    <span id="summary-unit-price">250 جنيه × 1</span>
                </div>
                <div class="summary-item" id="discount-summary" style="display:none;">
                    <span id="discount-text">الخصم (كود: AHMEDALI50)</span>
                    <span id="discount-amount">-0 جنيه</span>
                </div>
                <div class="summary-item">
                    <span>التوصيل</span>
                    <span>مجاني</span>
                </div>
                <div class="summary-total">
                    <span>المجموع النهائي:</span>
                    <span id="final-total">250 جنيه</span>
                </div>
                <div class="payment-info">
                    الدفع عند الاستلام 
                </div>
            </div>
            <form id="orderForm">
                <!-- حقل كود الخصم -->
                <div class="form-group">
                    <label>كود الخصم</label>
                    <div class="discount-section">
                        <input type="text" id="discountCode" class="discount-input" placeholder="أدخل كود الخصم">
                        <button type="button" class="discount-btn" onclick="applyDiscount()">تطبيق الخصم</button>
                    </div>
                    <div id="discountMessage" class="discount-message"></div>
                </div>
                
                <div class="form-group">
                    <label>الاسم الكامل *</label>
                    <input type="text" id="fullName" required placeholder="الاسم الثلاثي">
                </div>
                <div class="form-group">
                    <label>رقم الهاتف *</label>
                    <input type="tel" id="phone" required placeholder="مثال: 01XXXXXXXXX">
                </div>
                <div class="form-group">
                    <label>البريد الإلكتروني *</label>
                    <input type="email" id="email" required placeholder="example@example.com">
                    <div class="email-help">
                        تأكد من صحة البريد الإلكتروني.
                    </div>
                </div>
                <div class="form-group">
                    <label>العنوان بالتفصيل *</label>
                    <textarea id="address" rows="3" required placeholder="المحافظة، المدينة، الشارع، رقم المبنى"></textarea>
                </div>
                <div class="form-group">
                    <label>المحافظة *</label>
                    <select id="governorate" required>
                        <option value="">اختر المحافظة</option>
                        <option value="القاهرة">القاهرة</option>
                        <option value="الجيزة">الجيزة</option>
                        <option value="الإسكندرية">الإسكندرية</option>
                        <option value="أسيوط">أسيوط</option>
                        <option value="الأقصر">الأقصر</option>
                        <option value="أسوان">أسوان</option>
                        <option value="المنيا">المنيا</option>
                        <option value="سوهاج">سوهاج</option>
                        <option value="قنا">قنا</option>
                        <option value="بني سويف">بني سويف</option>
                        <option value="الفيوم">الفيوم</option>
                        <option value="دمياط">دمياط</option>
                        <option value="الدقهلية">الدقهلية</option>
                        <option value="الشرقية">الشرقية</option>
                        <option value="القليوبية">القليوبية</option>
                        <option value="كفر الشيخ">كفر الشيخ</option>
                        <option value="الغربية">الغربية</option>
                        <option value="المنوفية">المنوفية</option>
                        <option value="البحيرة">البحيرة</option>
                        <option value="الإسماعيلية">الإسماعيلية</option>
                        <option value="بورسعيد">بورسعيد</option>
                        <option value="السويس">السويس</option>
                        <option value="شمال سيناء">شمال سيناء</option>
                        <option value="جنوب سيناء">جنوب سيناء</option>
                        <option value="مطروح">مطروح</option>
                        <option value="البحر الأحمر">البحر الأحمر</option>
                        <option value="الوادي الجديد">الوادي الجديد</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ملاحظات إضافية</label>
                    <textarea id="notes" rows="2" placeholder="أي تعليمات خاصة للتوصيل"></textarea>
                </div>
                <button type="submit" class="btn">تأكيد البيانات والمتابعة</button>
            </form>
        </div>
        
        <!-- نموذج طلب خدمة الإخراج -->
        <div class="service-form" id="service-order-form">
            <div class="back-btn" onclick="showServicesSection()">
                <i>←</i> العودة للخدمات
            </div>
            
            <h2 style="text-align: center; color: #1A73E8; margin-bottom: 30px;" id="service-form-title">📋 بيانات طلب الإخراج المؤقت</h2>
            
                        
            <div class="order-summary">
                <h3>ملخص الخدمة</h3>
                <div class="summary-item">
                    <span id="service-name">إخراج التابلت A7 من النظام (مؤقت)</span>
                    <span id="service-price-display">130 جنيه</span>
                </div>
                <div class="summary-item" id="service-discount-summary" style="display:none;">
                    <span id="service-discount-text">الخصم (كود: AHMEDALI50)</span>
                    <span id="service-discount-amount">-26 جنيه</span>
                </div>
                <div class="summary-total">
                    <span>المجموع النهائي:</span>
                    <span id="service-total">130 جنيه</span>
                </div>
            </div>
            
            <form id="serviceOrderForm">
                <div class="form-group">
                    <label>كود الخصم</label>
                    <div class="discount-section">
                        <input type="text" id="serviceDiscountCode" class="discount-input" placeholder="أدخل كود الخصم">
                        <button type="button" class="discount-btn" onclick="applyServiceDiscount()">تطبيق الخصم</button>
                    </div>
                    <div id="serviceDiscountMessage" class="discount-message"></div>
                </div>
                
                <div class="form-group">
                    <label>الاسم الكامل *</label>
                    <input type="text" id="serviceFullName" required placeholder="الاسم الثلاثي">
                </div>
                <div class="form-group">
                    <label>رقم الواتساب *</label>
                    <input type="tel" id="serviceWhatsapp" required placeholder="مثال: 01XXXXXXXXX">
                </div>
                <div class="form-group">
                    <label>البريد الإلكتروني</label>
                    <input type="email" id="serviceEmail" placeholder="example@example.com">
                </div>
                <div class="form-group">
                    <label>المحافظة *</label>
                    <select id="serviceGovernorate" required onchange="toggleAddressField()">
                        <option value="">اختر المحافظة</option>
                        <option value="أسيوط">أسيوط</option>
                        <option value="القاهرة">القاهرة</option>
                        <option value="الجيزة">الجيزة</option>
                        <option value="الإسكندرية">الإسكندرية</option>
                        <option value="الأقصر">الأقصر</option>
                        <option value="أسوان">أسوان</option>
                        <option value="المنيا">المنيا</option>
                        <option value="سوهاج">سوهاج</option>
                        <option value="قنا">قنا</option>
                        <option value="بني سويف">بني سويف</option>
                        <option value="الفيوم">الفيوم</option>
                        <option value="دمياط">دمياط</option>
                        <option value="الدقهلية">الدقهلية</option>
                        <option value="الشرقية">الشرقية</option>
                        <option value="القليوبية">القليوبية</option>
                        <option value="كفر الشيخ">كفر الشيخ</option>
                        <option value="الغربية">الغربية</option>
                        <option value="المنوفية">المنوفية</option>
                        <option value="البحيرة">البحيرة</option>
                        <option value="الإسماعيلية">الإسماعيلية</option>
                        <option value="بورسعيد">بورسعيد</option>
                        <option value="السويس">السويس</option>
                        <option value="شمال سيناء">شمال سيناء</option>
                        <option value="جنوب سيناء">جنوب سيناء</option>
                        <option value="مطروح">مطروح</option>
                        <option value="البحر الأحمر">البحر الأحمر</option>
                        <option value="الوادي الجديد">الوادي الجديد</option>
                    </select>
                </div>
                <div class="form-group address-field" id="addressField">
                    <label>العنوان بالتفصيل *</label>
                    <textarea id="serviceAddress" rows="3" placeholder="المدينة، الشارع، رقم المبنى"></textarea>
                    <button type="button" class="location-btn" onclick="getLocation()">
                        <i>📍</i> تحديد الموقع الحالي
                    </button>
                </div>
                <div class="form-group">
                    <label>هل تمتلك جهاز كمبيوتر؟ *</label>
                    <select id="hasComputer" required>
                        <option value="">اختر الإجابة</option>
                        <option value="نعم">نعم</option>
                        <option value="لا">لا</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>سبب طلب الإخراج *</label>
                    <textarea id="serviceReason" rows="3" required placeholder="برجاء توضيح سبب طلبك للإخراج"></textarea>
                </div>
                <button type="submit" class="btn">تأكيد طلب الخدمة</button>
            </form>
        </div>
        
        <!-- نموذج الاستشارة المجانية -->
        <div class="service-form" id="consultation-form">
            <div class="back-btn" onclick="showServicesSection()">
                <i>←</i> العودة للخدمات
            </div>
            
            <h2 style="text-align: center; color: #1A73E8; margin-bottom: 30px;">استشارة مجانية</h2>
            
            <form id="consultationForm">
                <div class="form-group">
                    <label>الاسم الكامل *</label>
                    <input type="text" id="consultationName" required placeholder="الاسم الثلاثي">
                </div>
                <div class="form-group">
                    <label>رقم الواتساب *</label>
                    <input type="tel" id="consultationWhatsapp" required placeholder="مثال: 01XXXXXXXXX">
                </div>
                <div class="form-group">
                    <label>البريد الإلكتروني</label>
                    <input type="email" id="consultationEmail" placeholder="example@example.com">
                </div>
                <div class="form-group">
                    <label>استفسارك أو مشكلتك *</label>
                    <textarea id="consultationQuestion" rows="5" required placeholder="برجاء وصف المشكلة أو الاستفسار بالتفصيل"></textarea>
                </div>
                <button type="submit" class="btn">إرسال الاستشارة</button>
            </form>
        </div>
        
        <!-- Confirmation Section -->
        <div class="confirmation-section" id="confirmation-section">
            <div class="back-btn" onclick="showOrderForm()">
                <i>←</i> تعديل البيانات
            </div>
            
            <h2 style="text-align: center; color: #FB8C00; margin-bottom: 8px; font-size: 1.4rem; font-weight: 600;">تم استلام طلبك بنجاح</h2>
            <p style="text-align: center; color: #718096; margin-bottom: 25px; font-size: 0.95rem;">تم إرسال تفاصيل الطلب</p>
            
            <div class="success-message">
                <p>
                    شكراً لاختيارك الوزارة لطلب الجراب. سيتم التواصل معك خلال ساعات قليلة لتأكيد الطلب وترتيب التوصيل
                </p>
            </div>
            
            <div class="confirmation-options">
                <button class="confirmation-card whatsapp" onclick="contactViaWhatsapp()">
                    <div class="confirmation-icon">📱</div>
                    <h3>التواصل عبر واتساب</h3>
                    <h4>اضغط هنا للتواصل مع خدمة العملاء عبر واتساب</h4>
                </button>
                
                <button class="confirmation-card phone" onclick="callCustomerService()">
                    <div class="confirmation-icon">📲</div>
                    <h3>الاتصال بخدمة العملاء</h3>
                    <h4>اضغط هنا للاتصال بنا مباشرةً</h4>
                </button>
            </div>
        </div>
        
        <!-- تأكيد طلب الخدمة -->
        <div class="service-confirmation" id="service-confirmation-section">
            <div class="back-btn" onclick="showServicesSection()">
                <i>←</i> العودة للخدمات
            </div>
            
            <h2 style="text-align: center; color: #FB8C00; margin-bottom: 8px; font-size: 1.4rem; font-weight: 600;">تم استلام طلبك بنجاح</h2>
            <p style="text-align: center; color: #718096; margin-bottom: 25px; font-size: 0.95rem;">تم إرسال تفاصيل الخدمة</p>
            
            <div class="success-message">
                <p id="service-success-message">
                    شكراً لك على طلب خدمة إخراج التابلت. سيتم التواصل معك خلال ساعات قليلة لتأكيد الخدمة وترتيب التنفيذ.
                </p>
            </div>
            
            <div class="confirmation-options">
                <button class="confirmation-card whatsapp" onclick="contactViaWhatsapp()">
                    <div class="confirmation-icon">📱</div>
                    <h3>التواصل عبر واتساب</h3>
                    <h4>اضغط هنا للتواصل مع خدمة العملاء عبر واتساب</h4>
                </button>
                
                <button class="confirmation-card phone" onclick="callCustomerService()">
                    <div class="confirmation-icon">📲</div>
                    <h3>الاتصال بخدمة العملاء</h3>
                    <h4>اضغط هنا للاتصال بنا مباشرةً</h4>
                </button>
            </div>
        </div>
    </div>
    <script>
        // Initialize variables
        let selectedColor = 'أسود';
        let selectedService = null;
        let orderData = {};
        let currentImageIndex = 1;
        let touchStartX = 0;
        let touchEndX = 0;
        let discountApplied = false;
        let discountAmount = 0;
        const validDiscountCode = "AHMEDALI50";
        let quantity = 1;
        const unitPrice = 250;
        let serviceDiscountApplied = false;
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set first image as active
            changeMainImage(1);
            
            // Theme toggle
            const themeToggle = document.getElementById('themeToggle');
            const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
            const currentTheme = localStorage.getItem('theme');
            
            if (currentTheme === 'dark' || (!currentTheme && prefersDarkScheme.matches)) {
                document.body.classList.add('dark-mode');
                themeToggle.textContent = '👓';
            } else {
                themeToggle.textContent = '🕶️';
            }
            
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                if (document.body.classList.contains('dark-mode')) {
                    localStorage.setItem('theme', 'dark');
                    themeToggle.textContent = '👓';
                } else {
                    localStorage.setItem('theme', 'light');
                    themeToggle.textContent = '🕶️';
                }
            });
            
            // Check if images loaded successfully
            checkImageLoading();
            
            // Add touch events for swipe navigation
            setupSwipeNavigation();
            
            // Setup quantity selector
            setupQuantitySelector();
            
            // إعداد معالجات النماذج للخدمات
            document.getElementById('serviceOrderForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const serviceData = {
                    serviceName: selectedService === 1 ? 'إخراج مؤقت' : 'إخراج نهائي',
                    servicePrice: selectedService === 1 ? '130 جنيه' : '150 جنيه',
                    fullName: document.getElementById('serviceFullName').value,
                    whatsapp: document.getElementById('serviceWhatsapp').value,
                    email: document.getElementById('serviceEmail').value || 'لم يتم إدخاله',
                    governorate: document.getElementById('serviceGovernorate').value,
                    address: document.getElementById('serviceAddress').value || 'غير مطلوب',
                    hasComputer: document.getElementById('hasComputer').value,
                    reason: document.getElementById('serviceReason').value,
                    discountApplied: serviceDiscountApplied
                };
                
                sendServiceEmail(serviceData);
            });
            
            document.getElementById('consultationForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const consultationData = {
                    name: document.getElementById('consultationName').value,
                    whatsapp: document.getElementById('consultationWhatsapp').value,
                    email: document.getElementById('consultationEmail').value || 'لم يتم إدخاله',
                    question: document.getElementById('consultationQuestion').value
                };
                
                sendConsultationEmail(consultationData);
            });
        });
        
        // إعداد عداد الكمية
        function setupQuantitySelector() {
            const decreaseBtn = document.getElementById('decrease-quantity');
            const increaseBtn = document.getElementById('increase-quantity');
            const quantityInput = document.getElementById('quantity');
            
            decreaseBtn.addEventListener('click', function() {
                if (quantity > 1) {
                    quantity--;
                    quantityInput.value = quantity;
                    updateTotalPrice();
                }
            });
            
            increaseBtn.addEventListener('click', function() {
                if (quantity < 20) {
                    quantity++;
                    quantityInput.value = quantity;
                    updateTotalPrice();
                }
            });
            
            quantityInput.addEventListener('change', function() {
                let value = parseInt(this.value);
                if (isNaN(value) || value < 1) value = 1;
                if (value > 10) value = 10;
                quantity = value;
                this.value = value;
                updateTotalPrice();
            });
        }
        
        // تحديث السعر الإجمالي
        function updateTotalPrice() {
            const totalPrice = unitPrice * quantity;
            document.getElementById('total-price').textContent = totalPrice + ' جنيه';
            
            if (document.getElementById('order-form').style.display === 'block') {
                updateOrderSummary();
            }
        }
        
        // Function to change main image
        function changeMainImage(index) {
            const mainImages = document.querySelectorAll('#main-image img');
            mainImages.forEach(img => img.style.display = 'none');
            
            const selectedImg = document.getElementById(`main-img-${index}`);
            selectedImg.style.display = 'block';
            
            document.querySelector('.image-placeholder').style.display = 'none';
            
            const thumbnails = document.querySelectorAll('.thumbnail');
            thumbnails.forEach((thumb, i) => {
                if (i === index - 1) {
                    thumb.classList.add('active');
                } else {
                    thumb.classList.remove('active');
                }
            });
            
            const swipeDots = document.querySelectorAll('.swipe-dot');
            swipeDots.forEach(dot => {
                if (parseInt(dot.dataset.index) === index) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
            
            currentImageIndex = index;
        }
        
        // Setup swipe navigation
        function setupSwipeNavigation() {
            const mainImage = document.getElementById('main-image');
            
            mainImage.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            });
            
            mainImage.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });
            
            mainImage.addEventListener('mousedown', e => {
                touchStartX = e.clientX;
                document.addEventListener('mouseup', handleMouseUp);
            });
        }
        
        function handleMouseUp(e) {
            touchEndX = e.clientX;
            handleSwipe();
            document.removeEventListener('mouseup', handleMouseUp);
        }
        
        function handleSwipe() {
            const diff = touchStartX - touchEndX;
            const threshold = 50;
            
            if (diff > threshold) {
                prevImage();
            }
            else if (diff < -threshold) {
                nextImage();
            }
        }
        
        function nextImage() {
            let nextIndex = currentImageIndex + 1;
            if (nextIndex > 3) nextIndex = 1;
            changeMainImage(nextIndex);
        }
        
        function prevImage() {
            let prevIndex = currentImageIndex - 1;
            if (prevIndex < 1) prevIndex = 3;
            changeMainImage(prevIndex);
        }
        
        // Function to check if images loaded
        function checkImageLoading() {
            const images = document.querySelectorAll('#main-image img');
            let allLoaded = true;
            
            images.forEach(img => {
                if (!img.complete || img.naturalHeight === 0) {
                    allLoaded = false;
                    img.onerror = function() {
                        document.querySelector('.image-placeholder').textContent = 'لم يتم تحميل الصورة، يرجى التحقق من الاتصال بالإنترنت';
                        document.querySelector('.image-placeholder').style.display = 'block';
                    };
                }
            });
            
            if (allLoaded) {
                document.querySelector('.image-placeholder').style.display = 'none';
            }
        }
        
        // Function to show order form
        function showOrderForm() {
            hideAllSections();
            document.getElementById('order-form').style.display = 'block';
            updateOrderSummary();
            window.scrollTo(0, 0);
        }
        
        // Function to show product section
        function showProductSection() {
            hideAllSections();
            document.getElementById('product-section').style.display = 'block';
            window.scrollTo(0, 0);
        }
        
        // Function to show services section
        function showServicesSection() {
            hideAllSections();
            document.getElementById('services-section').style.display = 'block';
            window.scrollTo(0, 0);
        }
        
        // إخفاء جميع الأقسام
        function hideAllSections() {
            const sections = [
                'product-section', 
                'services-section',
                'order-form',
                'service-order-form',
                'consultation-form',
                'confirmation-section',
                'service-confirmation-section'
            ];
            
            sections.forEach(id => {
                document.getElementById(id).style.display = 'none';
            });
        }
        
        // تحديث ملخص الطلب
        function updateOrderSummary() {
            const totalPrice = unitPrice * quantity;
            const discountAppliedNow = discountApplied && document.getElementById('discountCode').value.trim() === validDiscountCode;
            const discountPerItem = discountAppliedNow ? 50 : 0;
            const totalDiscount = discountPerItem * quantity;
            const finalPrice = totalPrice - totalDiscount;
            
            const orderSummary = document.getElementById('order-summary');
            const discountSummary = document.getElementById('discount-summary');
            const discountText = document.getElementById('discount-text');
            const discountAmountElem = document.getElementById('discount-amount');
            const finalTotal = document.getElementById('final-total');
            
            document.getElementById('summary-unit-price').textContent = `${unitPrice} جنيه × ${quantity}`;
            
            if (discountAppliedNow) {
                discountSummary.style.display = 'flex';
                discountText.textContent = `الخصم (كود: ${validDiscountCode} - ${discountPerItem} جنيه/قطعة)`;
                discountAmountElem.textContent = `-${totalDiscount} جنيه`;
            } else {
                discountSummary.style.display = 'none';
            }
            
            finalTotal.textContent = `${finalPrice} جنيه`;
        }
        
        // دالة تطبيق الخصم للمنتجات
        function applyDiscount() {
            const discountCode = document.getElementById('discountCode').value.trim();
            const discountMessage = document.getElementById('discountMessage');
            
            if (discountCode === validDiscountCode) {
                discountApplied = true;
                discountMessage.textContent = `تم تطبيق خصم 50 جنيه لكل قطعة بنجاح!`;
                discountMessage.className = 'discount-message discount-success';
                updateOrderSummary();
            } else if (discountCode === '') {
                discountMessage.textContent = 'يرجى إدخال كود الخصم';
                discountMessage.className = 'discount-message discount-info';
            } else {
                discountMessage.textContent = 'كود الخصم غير صحيح أو منتهي الصلاحية';
                discountMessage.className = 'discount-message discount-error';
                discountApplied = false;
                updateOrderSummary();
            }
        }
        
        // دالة تطبيق الخصم للخدمات
        function applyServiceDiscount() {
            const discountCode = document.getElementById('serviceDiscountCode').value.trim();
            const discountMessage = document.getElementById('serviceDiscountMessage');
            const discountSummary = document.getElementById('service-discount-summary');
            const discountText = document.getElementById('service-discount-text');
            const discountAmountElem = document.getElementById('service-discount-amount');
            
            const servicePrice = selectedService === 1 ? 130 : 150;
            let finalPrice = servicePrice;
            
            if (discountCode === validDiscountCode) {
                // تطبيق خصم 20% على الخدمة
                const discountAmount = servicePrice * 0.2;
                finalPrice = servicePrice - discountAmount;
                
                serviceDiscountApplied = true;
                discountMessage.textContent = `تم تطبيق خصم 20% بنجاح! السعر الجديد: ${finalPrice} جنيه`;
                discountMessage.className = 'discount-message discount-success';
                
                // تحديث ملخص الخدمة
                discountSummary.style.display = 'flex';
                discountText.textContent = `الخصم (كود: ${validDiscountCode})`;
                discountAmountElem.textContent = `-${discountAmount} جنيه`;
                document.getElementById('service-total').textContent = `${finalPrice} جنيه`;
            } else if (discountCode === '') {
                discountMessage.textContent = 'يرجى إدخال كود الخصم';
                discountMessage.className = 'discount-message discount-info';
                discountSummary.style.display = 'none';
                document.getElementById('service-total').textContent = `${servicePrice} جنيه`;
            } else {
                discountMessage.textContent = 'كود الخصم غير صحيح أو منتهي الصلاحية';
                discountMessage.className = 'discount-message discount-error';
                discountSummary.style.display = 'none';
                document.getElementById('service-total').textContent = `${servicePrice} جنيه`;
            }
        }
        
        // Function to send email using Formspree
        function sendOrderEmail(orderData) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            const discountPerItem = discountApplied ? 50 : 0;
            const totalDiscount = discountPerItem * quantity;
            const finalPrice = (unitPrice * quantity) - totalDiscount;
            
            const formData = new FormData();
            formData.append('Name', orderData.fullName);
            formData.append('Phone', orderData.phone);
            formData.append('Email', orderData.email);
            formData.append('Governorate', orderData.governorate);
            formData.append('Address', orderData.address);
            formData.append('Notes', orderData.notes || 'لا توجد ملاحظات');
            formData.append('Product', orderData.product);
            formData.append('Color', orderData.color);
            formData.append('Quantity', quantity);
            formData.append('Unit Price', `${unitPrice} جنيه`);
            formData.append('Total Price', `${unitPrice * quantity} جنيه`);
            formData.append('Discount Applied', discountApplied ? 'نعم' : 'لا');
            formData.append('Discount Amount', `${totalDiscount} جنيه`);
            formData.append('Discount Code', discountApplied ? validDiscountCode : 'لم يتم تطبيق خصم');
            formData.append('Final Price', `${finalPrice} جنيه`);
            
            fetch('https://formspree.io/f/xanbvber', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    loadingOverlay.style.display = 'none';
                    hideAllSections();
                    document.getElementById('confirmation-section').style.display = 'block';
                    window.scrollTo(0, 0);
                } else {
                    throw new Error('فشل في إرسال البريد الإلكتروني');
                }
            })
            .catch(error => {
                console.log('فشل في إرسال البريد الإلكتروني:', error);
                loadingOverlay.style.display = 'none';
                hideAllSections();
                document.getElementById('confirmation-section').style.display = 'block';
                window.scrollTo(0, 0);
            });
        }
        
        // Function to submit order form
        document.getElementById('orderForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            orderData = {
                fullName: document.getElementById('fullName').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                address: document.getElementById('address').value,
                governorate: document.getElementById('governorate').value,
                notes: document.getElementById('notes').value,
                color: selectedColor,
                product: 'جراب الوزارة + قلم تاتش'
            };
            
            sendOrderEmail(orderData);
        });
        
        // Additional functions for confirmation options
        function contactViaWhatsapp() {
            const phone = encodeURIComponent('+201285687227');
            const message = encodeURIComponent(` مرحباً، لقد قدمت طلباً لشراء جراب الوزارة معي بعض الإستفسارات ${orderData.email}`);
            window.open(`https://wa.me/${phone}?text=${message}`, '_blank');
        }
        
        function callCustomerService() {
            window.location.href = 'tel:+201159793397';
        }
        
        // دوال الخدمات الجديدة
        function selectService(serviceNumber) {
            selectedService = serviceNumber;
            serviceDiscountApplied = false; // إعادة تعيين حالة الخصم
            
            if (serviceNumber === 1 || serviceNumber === 2) {
                showServiceOrderForm(serviceNumber);
            } else if (serviceNumber === 3) {
                showConsultationForm();
            }
        }
        
        function showServiceOrderForm(serviceNumber) {
            hideAllSections();
            document.getElementById('service-order-form').style.display = 'block';
            
            // إعادة تعيين حقل الخصم
            document.getElementById('serviceDiscountCode').value = '';
            document.getElementById('serviceDiscountMessage').textContent = '';
            document.getElementById('serviceDiscountMessage').className = 'discount-message';
            document.getElementById('service-discount-summary').style.display = 'none';
            
            if (serviceNumber === 1) {
                document.getElementById('service-form-title').textContent = '📋 بيانات طلب الإخراج المؤقت';
                document.getElementById('service-name').textContent = 'إخراج التابلت A7 من النظام (مؤقت)';
                document.getElementById('service-price-display').textContent = '130 جنيه';
                document.getElementById('service-total').textContent = '130 جنيه';
            } else {
                document.getElementById('service-form-title').textContent = '📋 بيانات طلب الإخراج النهائي';
                document.getElementById('service-name').textContent = 'إخراج التابلت A7 من النظام (نهائي)';
                document.getElementById('service-price-display').textContent = '150 جنيه';
                document.getElementById('service-total').textContent = '150 جنيه';
            }
            
            window.scrollTo(0, 0);
        }
        
        function showConsultationForm() {
            hideAllSections();
            document.getElementById('consultation-form').style.display = 'block';
            window.scrollTo(0, 0);
        }
        
        function toggleAddressField() {
            const governorate = document.getElementById('serviceGovernorate').value;
            const addressField = document.getElementById('addressField');
            
            if (governorate === 'أسيوط') {
                addressField.style.display = 'block';
                document.getElementById('serviceAddress').required = true;
            } else {
                addressField.style.display = 'none';
                document.getElementById('serviceAddress').required = false;
            }
        }
        
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const lat = position.coords.latitude;
                    const lng = position.coords.longitude;
                    const locationText = `الموقع: ${lat}, ${lng}`;
                    const currentAddress = document.getElementById('serviceAddress').value;
                    document.getElementById('serviceAddress').value = currentAddress + '\n' + locationText;
                }, function(error) {
                    alert('لا يمكن الحصول على الموقع: ' + error.message);
                });
            } else {
                alert('المتصفح لا يدعم خدمة تحديد الموقع');
            }
        }
        
        function sendServiceEmail(serviceData) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            const servicePrice = selectedService === 1 ? 130 : 150;
            const discountAmount = serviceDiscountApplied ? servicePrice * 0.2 : 0;
            const finalPrice = servicePrice - discountAmount;
            
            const formData = new FormData();
            formData.append('Service Type', 'طلب خدمة إخراج التابلت');
            formData.append('Service Name', serviceData.serviceName);
            formData.append('Service Original Price', `${servicePrice} جنيه`);
            formData.append('Discount Applied', serviceDiscountApplied ? 'نعم' : 'لا');
            formData.append('Discount Percentage', serviceDiscountApplied ? '20%' : '0%');
            formData.append('Discount Amount', `${discountAmount} جنيه`);
            formData.append('Final Price', `${finalPrice} جنيه`);
            formData.append('Name', serviceData.fullName);
            formData.append('WhatsApp', serviceData.whatsapp);
            formData.append('Email', serviceData.email || 'لم يتم إدخاله');
            formData.append('Governorate', serviceData.governorate);
            formData.append('Address', serviceData.address || 'غير مطلوب');
            formData.append('Has Computer', serviceData.hasComputer);
            formData.append('Reason', serviceData.reason);
            
            fetch('https://formspree.io/f/xanbvber', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                loadingOverlay.style.display = 'none';
                hideAllSections();
                document.getElementById('service-confirmation-section').style.display = 'block';
                document.getElementById('service-success-message').textContent = 'شكراً لك على طلب خدمة إخراج التابلت. سيتم التواصل معك خلال ساعات قليلة لتأكيد الخدمة وترتيب التنفيذ.';
                window.scrollTo(0, 0);
            })
            .catch(error => {
                loadingOverlay.style.display = 'none';
                hideAllSections();
                document.getElementById('service-confirmation-section').style.display = 'block';
                document.getElementById('service-success-message').textContent = 'شكراً لك على استفسارك. سنرد عليك في أقرب وقت ممكن.';
                window.scrollTo(0, 0);
            });
        }
        
        function sendConsultationEmail(consultationData) {
            const loadingOverlay = document.getElementById('loadingOverlay');
            loadingOverlay.style.display = 'flex';
            
            const formData = new FormData();
            formData.append('Service Type', 'استشارة مجانية');
            formData.append('Name', consultationData.name);
            formData.append('WhatsApp', consultationData.whatsapp);
            formData.append('Email', consultationData.email || 'لم يتم إدخاله');
            formData.append('Question', consultationData.question);
            
            fetch('https://formspree.io/f/xanbvber', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                loadingOverlay.style.display = 'none';
                hideAllSections();
                document.getElementById('service-confirmation-section').style.display = 'block';
                document.getElementById('service-success-message').textContent = 'شكراً لك على استفسارك. سنرد عليك في أقرب وقت ممكن عبر الواتساب أو البريد الإلكتروني.';
                window.scrollTo(0, 0);
            })
            .catch(error => {
                loadingOverlay.style.display = 'none';
                hideAllSections();
                document.getElementById('service-confirmation-section').style.display = 'block';
                document.getElementById('service-success-message').textContent = 'شكراً لك على استفسارك. سنرد عليك في أقرب وقت ممكن.';
                window.scrollTo(0, 0);
            });
        }
    </script>
</body>
</html>
